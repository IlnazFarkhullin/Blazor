@page "/gallery"
@inject WebApplication1.galleryService.Igalleryservice tds
@using Microsoft.Win32
@using System.IO

<h3>Gallery</h3>
<div class="row">
    <div class="col">
        <input @bind="toDo.Name" name="input" class="form-control" placeholder="Введите название" />
    </div>
    <div class="col">

        <button @onclick="(() => Save())" class="btn btn-success"> Добавить</button>
    </div>
</div>
<table class="table">
    <thead>
        <tr>
            <th>Фамилия</th>
            <th>Имя</th>
            <th>Отчество</th>


        </tr>
    </thead>
    <tbody>
        @if (doto.Count() > 0)
        {
            @foreach (var item in doto)
            {
                <tr>
                    <td><img src="" alt="картинка"/></td>
                    <td>@item.Name</td>
                    
                   

                </tr>
            }
        }
    </tbody>

</table>

@code {
     
    galleryService.gallery gallery;
    galleryService.gallery toDo = new galleryService.gallery();
    List<galleryService.gallery> doto = new List<galleryService.gallery>();
    protected override async Task OnInitializedAsync()
    {
        GetToDO();
    }
    private void GetToDO()
    {
        doto = tds.GetDBpainting();
    }

    private void Save()
    {
        tds.Save(toDo);
        Reset();
        GetToDO();
    }
    private void Reset()
    {
        toDo = new galleryService.gallery();

    }
    private static void imgsrc()
        {
           OpenFileDialog openFileDialog = new OpenFileDialog();
            openFileDialog.Filter = "JPEG Files (*.jpeg)|*.jpeg|PNG Files (*.png)|*.png|JPG Files (*.jpg)|*.jpg|GIF Files (*.gif)|*.gif";
            if (openFileDialog.ShowDialog().GetValueOrDefault())
            {
                patient.Image = File.ReadAllBytes(openFileDialog.FileName);
                MemoryStream byteStream = new MemoryStream(galleryService.gallery.photo);
                BitmapImage image = new BitmapImage();
                image.BeginInit();
                image.StreamSource = byteStream;
                image.EndInit();
                Image.Source = image;
            }
        }
}
